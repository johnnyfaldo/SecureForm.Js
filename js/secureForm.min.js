var secureForm={};secureForm.elements={form:"#secureForm",required:".sf-required",insertCaptcha:"#sf-insert-captcha",captcha:"#sf-captcha",errorBox:"#sf-error-box",comparison:".sf-compare",email:".sf-email",confirm:".sf-confirm",setElement:function(e,value){this[e]=value}};secureForm.errors=function(elements){if(elements===false){console.log("Module: Errors","Error: elements object was not passed through")}var errors=[];var buildList=function(){var displayErrors="";_.each(errors,function(error){displayErrors+=error+", "});return displayErrors.slice(0,-2)};return{add:function(error){errors.push(error)},get:function(){return errors},clear:function(){errors=[]},display:function(suffix){var suffix='<span class="sf-suffix">'+suffix+"</span>",prefix="<br /><br />";$(elements.errorBox).append(suffix+buildList(errors)+prefix)},reset:function(){this.clear();$(elements.errorBox).html("")}}}(secureForm.elements||false);secureForm.captcha=function(elements,errors){var captcha;var generateCode=function(){captcha=Math.floor(Math.random()*5e3+1e3)}();$(elements.insertCaptcha).html(captcha);return function(){if(parseInt($(elements.captcha).val())===captcha){$(elements.captcha).removeClass("sf-captcha-error");return true}else{errors.clear();errors.add("Security code was incorrect");errors.display("Error: ");$(elements.captcha).addClass("sf-captcha-error");return false}}}(secureForm.elements,secureForm.errors);secureForm.compare=function(elements,errors){var $comparisons;$(function(){$comparisons=$(elements.comparison)});return function(){var comparisons=[],labels=[],values=[];$comparisons.each(function(){comparisons.push($(this).val());labels.push($(this).data("label")||$(this).prop("name"))});var unique=_.uniq(comparisons,true);if(unique.length>1&&(comparisons[0]!==""||comparisons[0]!==undefined)){errors.clear();errors.add(labels.join(", "));errors.display("The following fields must match: ");$(elements.comparison).addClass("sf-comparison-error");return false}else{return true}}}(secureForm.elements,secureForm.errors);secureForm.confirm=function(elements,errors){return function(){var $confirm=$(elements.confirm),errorsFound=0;$confirm.each(function(){if(!$(this).is(":checked")){errorsFound++;errors.add($(this).data("label")||$(this).prop("name"));$(this).addClass("sf-confirm-error")}else{$(this).removeClass("sf-confirm-error")}});if(errorsFound>0){errors.display("The following must be checked: ");return false}else{return true}}}(secureForm.elements,secureForm.errors);secureForm.email=function(elements,errors){var $email;$(function(){$email=$(elements.email)});var validateEmail=function(email){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email)};return function(){var errorsFound=0,labels=[];$email.each(function(){if(!validateEmail($(this).val())){errorsFound++;$(this).addClass("sf-email-error")}});if(errorsFound>0){errors.display("Error: You have entered an invalid email address.")}}}(secureForm.elements,secureForm.errors);secureForm.required=function(elements,errors){return function(){var $e=$(elements.required),errorsFound=0;$e.each(function(){var $this=$(this);var label=$this.data("label");if($this.val().length<1){errorsFound++;$this.addClass("sf-required-error");if(label){errors.add(label)}else{errors.add($this.prop("name"))}}else{$this.removeClass("sf-required-error")}});if(errorsFound>0){errors.display("The following are required fields: ");return false}else{return true}}}(secureForm.elements,secureForm.errors);(function(elements,errors,required,captcha,compare,email,confirm){$(function(){$(elements.form).submit(function(){errors.reset();var validations=[required,captcha,email,confirm,compare],validationErrors=0;_.each(validations,function(validate){if(!validate()){validationErrors++}});if(validationErrors<1){return true}else{return false}})})})(secureForm.elements,secureForm.errors,secureForm.required,secureForm.captcha,secureForm.compare,secureForm.email,secureForm.confirm);